================================================================================
SPARK POINTS SEASON 2 - MIGRATION QUICK REFERENCE
================================================================================

CURRENT STATUS: Free public dashboard
MIGRATING TO: Pay-to-track (€19.90 one-time payment)

================================================================================
KEY NUMBERS
================================================================================
Price: €19.90 EUR (one-time)
Deadline: December 12, 2025
Days Remaining: 289 days (from Dec 7, 2024)
Value: ~€0.67/day
Conservative Revenue: €995 (50 wallets)
Moderate Revenue: €3,980 (200 wallets)
Optimistic Revenue: €9,950 (500 wallets)

================================================================================
NEW DOMAIN
================================================================================
spark-season2.saaatoshi.com

================================================================================
NEW GITHUB REPO
================================================================================
spark-points-season2

================================================================================
NEW DATABASE TABLE
================================================================================
tracked_wallets
├── wallet_address (TEXT, UNIQUE)
├── stripe_payment_id (TEXT, UNIQUE)
├── paid_amount (NUMERIC, default 19.90)
├── currency (TEXT, default 'EUR')
├── expires_at (TIMESTAMPTZ, default 2025-12-12)
└── created_at (TIMESTAMPTZ)

Function: is_wallet_tracked(wallet_addr TEXT) RETURNS BOOLEAN

================================================================================
PAYMENT FLOW
================================================================================
1. User searches wallet
2. Check if wallet in tracked_wallets
3. If NO → Show payment CTA
4. User pays via Stripe Checkout
5. Webhook adds wallet to tracked_wallets
6. Scraper picks up wallet within 1 hour
7. User sees full dashboard

================================================================================
STRIPE SETUP
================================================================================
Product Name: "Spark Season 2 Wallet Tracking"
Price: €19.90 EUR (one-time payment)
Webhook Events: checkout.session.completed
Webhook URL: https://[project-id].supabase.co/functions/v1/stripe-webhook

Test Card: 4242 4242 4242 4242 (any expiry/CVC)

================================================================================
SCRAPER CHANGES
================================================================================
OLD: Scrape single hardcoded wallet
NEW: Query tracked_wallets, loop through all active wallets

GitHub Actions: Runs every hour (cron: '0 * * * *')

================================================================================
FRONTEND CHANGES
================================================================================
New Components:
- PaymentCTA.tsx (€19.90 button)
- PricingDisplay.tsx (shows cost per day)
- PaymentSuccess.tsx (confirmation page)
- WalletNotTracked.tsx (empty state)

Updated Components:
- Index.tsx (add tracking check)
- Header (add countdown timer)

================================================================================
MIGRATION STEPS (SIMPLIFIED)
================================================================================
1. Save strategy to Project Knowledge ✅
2. Create docs in current repo ✅
3. Create new GitHub repo
4. Create new Lovable project
5. Enable Lovable Cloud
6. Run database migration
7. Enable Stripe + create product
8. Update scraper logic
9. Build frontend payment flow
10. Configure custom domain
11. Test with Stripe Test Mode
12. Switch to Live Mode
13. Launch!

================================================================================
TESTING CHECKLIST
================================================================================
[ ] Test payment adds wallet to database
[ ] Test scraper picks up new wallet
[ ] Test dashboard displays for tracked wallet
[ ] Test payment CTA shows for untracked wallet
[ ] Test on mobile devices
[ ] Test countdown timer accuracy
[ ] Test with multiple browsers

================================================================================
IMPORTANT FILES
================================================================================
/docs/PROJECT_STRATEGY.md - Full strategy document
/docs/MIGRATION_CHECKLIST.md - Detailed steps
/docs/DATABASE_CHANGES.md - SQL schemas
/docs/IMPLEMENTATION_PHASES.md - Week-by-week plan
/docs/MIGRATION_NOTES.txt - This file (quick reference)

================================================================================
SUPPORT & MONITORING
================================================================================
Monitor:
- Stripe webhook logs (payments)
- Supabase edge function logs
- GitHub Actions (scraper)
- Database queries (tracked_wallets)

Error Handling:
- Payment fails → Show retry button
- Scraper fails → Alert + manual backup
- Domain issues → Check DNS propagation

================================================================================
POST-LAUNCH METRICS
================================================================================
Track:
- Daily payment conversions
- Scraper uptime
- Average days to payment
- User support tickets
- Revenue vs projections

================================================================================
